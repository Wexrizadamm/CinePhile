{"version":3,"file":"ContentId-2c7e2b75.js","sources":["../../src/stores/videos.js","../../src/components/ContentId/IntroId.vue","../../src/components/ContentId/BudgetId.vue","../../src/components/ContentId/RecomId.vue","../../src/components/ContentId/ContentId.vue"],"sourcesContent":["import { defineStore } from \"pinia\";\r\nimport { baseUrl, lang, header_def } from \"@/static\";\r\nimport axios from \"axios\";\r\n\r\nexport const useVideos = defineStore(\"videos\", {\r\n  state: () => ({\r\n    movie: null,\r\n    tv: null,\r\n  }),\r\n  actions: {\r\n    async getVideos(type, id) {\r\n      try {\r\n        const res = await axios({\r\n          method: \"GET\",\r\n          url: `${baseUrl}/${type}/${id}/videos?language=en-US`,\r\n          headers: header_def,\r\n        });\r\n        const results = res.data.results;\r\n\r\n        if (type == \"movie\") this.movie = results[results.length - 1];\r\n        else this.tv = results[results.length - 1];\r\n      } catch (error) {\r\n        console.error(\"Error in videos.js\");\r\n      }\r\n    },\r\n  },\r\n});\r\n","<template>\r\n  <Transition name=\"content-id__intro\" mode=\"out-in\">\r\n    <div class=\"content-id__intro\" v-if=\"content && !videoShow\">\r\n      <img\r\n        v-lazy=\"imgUrlFull + content.backdrop_path\"\r\n        alt=\"\"\r\n        class=\"content-id__intro-background\"\r\n      />\r\n      <div class=\"content-id__intro-block\">\r\n        <div class=\"content-id__intro-left\">\r\n          <h1 class=\"content-id__intro-left-title\">\r\n            {{ content.title || content.name }}\r\n          </h1>\r\n          <p class=\"content-id__intro-left-overview\">{{ content.overview }}</p>\r\n          <p class=\"content-id__intro-left-data\">\r\n            <span>\r\n              {{\r\n                new Date(\r\n                  content.first_air_date || content.release_date\r\n                ).getFullYear()\r\n              }},\r\n            </span>\r\n            <span v-for=\"(genres, idx) in content.genres\" :key=\"genres.id\">\r\n              {{ genres.name\r\n              }}<span v-if=\"idx < content.genres.length - 1\">, </span>\r\n            </span>\r\n            <span class=\"runtime\">{{ content.runtime ? runtime : \"\" }}</span>\r\n          </p>\r\n          <button\r\n            class=\"content-id__intro-left-btn\"\r\n            @click=\"videoShow = true\"\r\n            v-if=\"video\"\r\n          >\r\n            <i class=\"fa fa-play\"></i>\r\n            <span>Смотерть трейлер</span>\r\n          </button>\r\n        </div>\r\n        <div class=\"content-id__intro-right\">\r\n          <img v-lazy=\"imgUrl + content.poster_path\" alt=\"\" />\r\n        </div>\r\n        <div class=\"content-id__intro-actors\">\r\n          <h2 class=\"content-id__intro-actors-title\">В главных ролях</h2>\r\n          <div class=\"content-id__intro-actors-cast\">\r\n            <actors :type=\"type\" :id=\"content.id\" :count=\"6\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"content-id__intro\" v-else-if=\"videoShow\">\r\n      <iframe\r\n        v-if=\"video\"\r\n        :src=\"`https://www.youtube.com/embed/${video.key}?rel=0&showinfo=0`\"\r\n        title=\"YouTube video player\"\r\n        frameborder=\"0\"\r\n        allowfullscreen\r\n      ></iframe>\r\n      <button class=\"content-id__intro-close\" @click=\"videoShow = false\">\r\n        <i class=\"fal fa-times\"></i>\r\n      </button>\r\n    </div>\r\n  </Transition>\r\n</template>\r\n\r\n<script setup>\r\nimport { imgUrl, imgUrlFull } from \"@/static\";\r\nimport { computed, ref } from \"vue\";\r\nconst props = defineProps([\"type\", \"content\", \"video\"]);\r\nconst runtime = computed(() => {\r\n  let min = props.content.runtime % 60;\r\n  let hour = Math.floor(props.content.runtime / 60);\r\n\r\n  return hour ? `${hour}ч ${min}м` : `${min}м`;\r\n});\r\nlet videoShow = ref(false);\r\n</script>\r\n","<template>\r\n  <div class=\"content-id__budget\"></div>\r\n</template>\r\n\r\n<script setup></script>\r\n","<template>\r\n  <div class=\"content-id__recom\"></div>\r\n</template>\r\n\r\n<script setup></script>\r\n","<template>\r\n  <section class=\"content-id\" v-if=\"contentId\">\r\n    <Intro :type=\"type\" :content=\"contentId\" :video=\"videoId\" />\r\n    <Budget :content=\"contentId\" />\r\n    <Recom />\r\n  </section>\r\n  <Loader v-else />\r\n</template>\r\n\r\n<script setup>\r\nimport { useDetails } from \"@/stores/details\";\r\nimport { useVideos } from \"@/stores/videos\";\r\nimport { useRoute } from \"vue-router\";\r\nimport { onMounted, computed, onBeforeUnmount } from \"vue\";\r\nimport Intro from \"./IntroId.vue\";\r\nimport Budget from \"./BudgetId.vue\";\r\nimport Recom from \"./RecomId.vue\";\r\n\r\nconst props = defineProps([\"type\"]);\r\nconst details = useDetails();\r\nconst videos = useVideos();\r\nconst route = useRoute();\r\nconst contentId = computed(() =>\r\n  props.type == \"movie\" ? details.movieId : details.tvId\r\n);\r\nconst videoId = computed(() =>\r\n  props.type == \"movie\" ? videos.movie : videos.tv\r\n);\r\n\r\nonMounted(() => {\r\n  setTimeout(() => {\r\n    details.getDetails(props.type, route.params.id);\r\n    videos.getVideos(props.type, route.params.id);\r\n  }, 500);\r\n});\r\n\r\nonBeforeUnmount(() => {\r\n  props.type == \"movie\" ? (details.movieId = null) : (details.tvId = null);\r\n  props.type == \"movie\" ? (videos.movie = null) : (videos.tv = null);\r\n});\r\n</script>\r\n"],"names":["useVideos","defineStore","type","id","results","axios","baseUrl","header_def","runtime","computed","min","props","hour","videoShow","ref","_sfc_render","_ctx","_cache","details","useDetails","videos","route","useRoute","contentId","videoId","onMounted","onBeforeUnmount"],"mappings":"8OAIO,MAAMA,EAAYC,EAAY,SAAU,CAC7C,MAAO,KAAO,CACZ,MAAO,KACP,GAAI,IACR,GACE,QAAS,CACP,MAAM,UAAUC,EAAMC,EAAI,CACxB,GAAI,CAMF,MAAMC,GALM,MAAMC,EAAM,CACtB,OAAQ,MACR,IAAK,GAAGC,KAAWJ,KAAQC,0BAC3B,QAASI,CACnB,CAAS,GACmB,KAAK,QAErBL,GAAQ,QAAS,KAAK,MAAQE,EAAQA,EAAQ,OAAS,CAAC,EACvD,KAAK,GAAKA,EAAQA,EAAQ,OAAS,CAAC,CAC1C,MAAC,CACA,QAAQ,MAAM,oBAAoB,CACnC,CACF,CACF,CACH,CAAC,iwBCyCKI,EAAUC,EAAS,IAAM,CAC7B,IAAIC,EAAMC,EAAM,QAAQ,QAAU,GAC9BC,EAAO,KAAK,MAAMD,EAAM,QAAQ,QAAU,EAAE,EAEhD,OAAOC,EAAO,GAAGA,MAASF,KAAS,GAAGA,IACxC,CAAC,EACD,IAAIG,EAAYC,EAAI,EAAK,gwCCxEvB,SAAAC,GAAAC,EAAAC,EAAA,4FCAA,SAAAF,GAAAC,EAAAC,EAAA,8ICkBIC,EAAUC,EAAU,EACpBC,EAASpB,EAAS,EAClBqB,EAAQC,EAAQ,EAChBC,EAAYd,EAAS,IACzBE,EAAM,MAAQ,QAAUO,EAAQ,QAAUA,EAAQ,IACpD,EACMM,EAAUf,EAAS,IACvBE,EAAM,MAAQ,QAAUS,EAAO,MAAQA,EAAO,EAChD,EAEA,OAAAK,EAAU,IAAM,CACd,WAAW,IAAM,CACfP,EAAQ,WAAWP,EAAM,KAAMU,EAAM,OAAO,EAAE,EAC9CD,EAAO,UAAUT,EAAM,KAAMU,EAAM,OAAO,EAAE,CAC7C,EAAE,GAAG,CACR,CAAC,EAEDK,EAAgB,IAAM,CACpBf,EAAM,MAAQ,QAAWO,EAAQ,QAAU,KAASA,EAAQ,KAAO,KACnEP,EAAM,MAAQ,QAAWS,EAAO,MAAQ,KAASA,EAAO,GAAK,IAC/D,CAAC"}