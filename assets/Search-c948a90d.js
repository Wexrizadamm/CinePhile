import{l as B,m as C,n as E,C as T,p as L,r as i,d as g,o as w,e as y,a as o,c as _,g as n,s as N,D as U,f as d,j as f,E as j,k as p,F as k,h as D,i as S,b as V}from"./index-22adb7ce.js";import{_ as F}from"./ContentItem-89c95bf0.js";const x=B("search",{state:()=>({saerchArray:[],adult:!1,totalResults:0,totalPages:0}),actions:{async getSearch(h="",e=1){if(h!="")try{const a=await C({method:"GET",url:`${E}/search/multi?query=${h}&include_adult=${this.adult}&language=${T}&page=${e}`,headers:L});this.saerchArray=a.data.results,this.totalPages=a.data.total_pages,this.totalResults=a.data.total_results}catch{console.error("Error in search.js")}else this.saerchArray=[],this.totalPages=0,this.totalResults=0}}}),I={class:"search"},K={class:"container"},M={class:"search__top"},q=["placeholder"],G=n("i",{class:"fal fa-times"},null,-1),z=[G],H={class:"content__list"},J={key:0,class:"content__pagination"},O={__name:"Search",setup(h){const e=x(),a=i("Найти фильм, сериал..."),c=i([]),A=g(()=>e.totalPages),P=g(()=>e.totalResults);let s=i(""),u=i(1),l=i(!1);const m=async()=>{if(!l.value){l.value=!0,c.value=[],await e.getSearch(s.value,u.value);let v=e.saerchArray;c.value.push(...v),l.value=!1,scrollTo({behavior:"smooth",top:0})}},R=()=>{l.value=!0,s.value="",c.value=[],e.saerchArray=[],e.totalPages=0,e.totalResults=0,l.value=!1};return w(()=>{scrollTo({behavior:"smooth",top:0})}),(v,r)=>{const $=y("vue-awesome-paginate"),b=y("Loader");return o(),_(k,null,[n("section",I,[n("div",K,[n("div",M,[N(n("input",{type:"text",class:"search__input",placeholder:a.value,"onUpdate:modelValue":r[0]||(r[0]=t=>f(s)?s.value=t:s=t),onKeydown:r[1]||(r[1]=j(t=>m(),["enter"]))},null,40,q),[[U,d(s)]]),d(s)?(o(),_("button",{key:0,class:"search__button",onClick:R},z)):p("",!0)]),n("div",H,[(o(!0),_(k,null,D(c.value,t=>(o(),S(F,{key:t.id,content:t,type:t.media_type},null,8,["content","type"]))),128))]),A.value>0?(o(),_("div",J,[V($,{"total-items":P.value,"items-per-page":20,"max-page-shown":5,modelValue:d(u),"onUpdate:modelValue":r[2]||(r[2]=t=>f(u)?u.value=t:u=t),"on-click":m},null,8,["total-items","modelValue"])])):p("",!0)])]),d(l)?(o(),S(b,{key:0})):p("",!0)],64)}}},Q={class:"main"},Y={__name:"Search",setup(h){const e=x();return w(()=>{e.searchArray=[],e.totalPages=0,e.totalResults=0}),(a,c)=>(o(),_("main",Q,[V(O)]))}};export{Y as default};
//# sourceMappingURL=Search-c948a90d.js.map
